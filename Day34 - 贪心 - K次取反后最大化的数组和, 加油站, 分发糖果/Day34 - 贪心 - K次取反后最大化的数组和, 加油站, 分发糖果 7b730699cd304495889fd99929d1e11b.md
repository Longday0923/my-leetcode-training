# Day34 - 贪心 - K次取反后最大化的数组和, 加油站, 分发糖果

<aside>
💡 如果是第一次接触的话，其实很难想出来，就是接触过之后就会了，所以大家不用感觉自己想不出来而烦躁，哈哈。

</aside>

## 1.✅****1005.K次取反后最大化的数组和「[讲解](https://programmercarl.com/1005.K%E6%AC%A1%E5%8F%96%E5%8F%8D%E5%90%8E%E6%9C%80%E5%A4%A7%E5%8C%96%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C.html#%E6%80%9D%E8%B7%AF)」**

- Initial Idea:
    - 每次取最小的值变负，不论正负，变号后再加回去。
    - 完美符合小顶堆的定义，复习了一下小顶堆的写法。
- 看讲解后：
    - 应该更“贪心”一些：先挑大的负数变正数，然后看K的剩余次数，奇数就把最小的正数变负数，偶数就不变了。（前面思路没毛病，后面加了一个剪枝）
    - 练习实现一下。

## 2.✅****134. 加油站「[讲解](https://programmercarl.com/0134.%E5%8A%A0%E6%B2%B9%E7%AB%99.html#%E6%9A%B4%E5%8A%9B%E6%96%B9%E6%B3%95)」**

- 又是一道没想明白的贪心算法，看完好好分析一下。
- 暴力解法会超时。
- 首先全局地看，若sum(cost) ≤ sum(gas): 一定可以跑完全程
- 然后局部地看，要求的是最优的出发点：
    - 若以某一点i为出发点，至点j的时候curRemain<0，那么从i~j间任何一点出发到j也都会断油，所以最优出发点至少≥j+1
    - 一开始想到这个了，但是给自己举了一个反例：如下图所示，有没有可能区间1+区间2小于0，但是从中间某位置开始就不小于零？当然有可能。但是计算一下，若总和<0，区间2大于0，那么区间1必然小于0，这时startId已经更新了。
        
        ![Untitled](Day34%20-%20%E8%B4%AA%E5%BF%83%20-%20K%E6%AC%A1%E5%8F%96%E5%8F%8D%E5%90%8E%E6%9C%80%E5%A4%A7%E5%8C%96%E7%9A%84%E6%95%B0%E7%BB%84%E5%92%8C,%20%E5%8A%A0%E6%B2%B9%E7%AB%99,%20%E5%88%86%E5%8F%91%E7%B3%96%E6%9E%9C%207b730699cd304495889fd99929d1e11b/Untitled.png)
        
    - 所以只要for循环len(gas)即可。到结尾如何处理？计算一个totalSum和一个curSum，如果循环结束时total<0，可以直接返回-1。否则返回维护的startId即可，必然是一个从某一位置开始加，加到最后都≥0的位置。
        - 有没有可能最后一段curSum<0，但是整体curSum ≥ 0?那说明前面必然curSum>0，相应startId就在前面，这时算到最后的curSum也是>0的。
- 练习复写完毕，小tip：本题先计算total=-1的情况，在找Id更快。怀疑是-1情况更多。

## 3.✅****135. 分发糖果「[讲解](https://programmercarl.com/0135.%E5%88%86%E5%8F%91%E7%B3%96%E6%9E%9C.html#%E6%80%9D%E8%B7%AF)」**

- Initial Idea:
    - 找到每个平台或谷底：
        - 谷底：从谷底=1出发，直到碰到拐点，每个点+=1
        - 平台：除平台两个角，都=1
- 看讲解：
    - 贪心关键：
        - 两个相邻的孩子，分高的要比分低的得更多的糖
        - 相当于，左边满足这个规则+右边满足这个规则
        - 所以先从左往右遍历，分高就+=1
        - 再从右往左遍历，注意分高时取max(原本的分, 低分+1)